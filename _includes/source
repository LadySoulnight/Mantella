{% if include.limit and include.offset %}
  {% capture content %}{% include source/{{ include.name }} %}{% endcapture %}
  {% assign splittedContent = content | newline_to_br | split: '<br />' %}
  {% highlight cpp %}{% for line in splittedContent offset: include.offset limit: include.limit %}{{ line }}{% endfor %}{% endhighlight %}
{% else %}
  {% highlight cpp %}{% include source/{{ include.name }} %}{% endhighlight %}
{% endif %}